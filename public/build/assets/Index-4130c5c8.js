import{l as k,v as B,o as i,g as n,a4 as A,a5 as I,d as l,j as U,u as q,a,b as s,w as g,F as $,a2 as M,H as O,f as F,k as H,e as w,t as j,h as p,c as E}from"./app-0f879bd6.js";import{_ as L}from"./AuthenticatedLayout-1dff01db.js";import{_,a as f}from"./InputLabel-386f6823.js";import{_ as S}from"./SelectInput-e237c28d.js";import{_ as P}from"./TextInput-b785b986.js";import{_ as T}from"./PrimaryButton-2486db8f.js";import{_ as W}from"./SecondaryButton-c6af0c1b.js";/* empty css             */import{_ as z}from"./FileInput-e3e373af.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-429fb7ab.js";const G=["value"],V={__name:"TextArea",props:["modelValue"],emits:["update:modelValue"],setup(c,{expose:h}){const m=k(null);return B(()=>{m.value.hasAttribute("autofocus")&&m.value.focus()}),h({focus:()=>m.value.focus()}),(b,v)=>(i(),n("textarea",{class:"border-gray-300 focus:border-emerald-600 focus:ring-emerald-600 rounded-md shadow-sm",value:c.modelValue,onInput:v[0]||(v[0]=y=>b.$emit("update:modelValue",y.target.value)),ref_key:"input",ref:m},null,40,G))}};const J={},C=c=>(A("data-v-ffe86f87"),c=c(),I(),c),K={class:"half-circle-spinner"},Q=C(()=>l("div",{class:"circle circle-1"},null,-1)),R=C(()=>l("div",{class:"circle circle-2"},null,-1)),X=[Q,R];function Y(c,h){return i(),n("div",K,X)}const Z=D(J,[["render",Y],["__scopeId","data-v-ffe86f87"]]),ee={class:"pt-8 pb-2"},se={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},ae={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},te=l("header",null,[l("h2",{class:"text-lg font-medium text-gray-900"}," Whatsapp Blasting "),l("p",{class:"mt-1 text-sm text-gray-600"},"Send whatsapp")],-1),oe=["onSubmit"],le=["disabled","value","hidden"],re={key:0},ie={key:0},ne=l("option",{value:"message"},"Message",-1),ue=l("option",{value:"photo"},"Photo",-1),de={key:1},me={key:2},pe={key:0,class:"pt-5"},ce={key:1,class:"pt-5"},_e={class:"flex items-center gap-4"},fe={key:0},ge={key:1},Ne={__name:"Index",props:{whatsappNumber:Object},setup(c){const h=c,m=k(!1);k(null),U(()=>M().props.value.flash).value;function b(){window.history.back()}function v(u){u.target.files&&(e.file_upload=u.target.files[0])}function y(u){const o=u.target.value,t=o.indexOf(",");let r=[];t!=-1?r=o.split(","):r=o.split(/\s+/);for(let d=0;d<r.length;d++){const x=r[d];x.substring(0,1)==="0"?r[d]="6"+r[d]:x.substring(0,1)==="1"?r[d]="60"+r[d]:r[d]=r[d]}e.array_number=r}const e=q({message:"",option:"",file_upload:[],caption:"",view_once:!1,compress:!0,number:"",array_number:""}),N=async()=>{try{m.value=!0,await e.post(route("whatsapp.store"),{onSuccess:()=>{m.value=!1,e.reset()}})}catch(u){console.error("Error:",u)}};return(u,o)=>(i(),n($,null,[a(s(O),{title:"Whatsapp Blasting"}),a(L,{auth:u.$page.props.auth},{default:g(()=>[l("div",ee,[l("div",se,[l("div",ae,[l("section",null,[te,l("form",{onSubmit:F(N,["prevent"]),enctype:"multipart/form-data",class:"mt-6 space-y-6",onChange:v},[l("div",null,[a(_,{for:"number",value:"Blasting Number"}),a(S,{id:"number",class:"mt-1 block w-full",modelValue:s(e).number,"onUpdate:modelValue":o[0]||(o[0]=t=>s(e).number=t),required:""},{default:g(()=>[(i(!0),n($,null,H(h.whatsappNumber,t=>{var r,d;return i(),n("option",{disabled:(r=t.first_whatsapp_batches)==null?void 0:r.isActive,value:t.id,hidden:!(u.$page.props.auth.role.name==="Admin"||t.user_id===u.$page.props.auth.user.id)},[w(j(t.name)+" ",1),(d=t.first_whatsapp_batches)!=null&&d.isActive?(i(),n("span",re," - number blasting in progress ")):p("",!0)],8,le)}),256))]),_:1},8,["modelValue"]),a(f,{class:"mt-2",message:s(e).errors.name},null,8,["message"])]),["3","4"].indexOf(s(e).number)>-1?(i(),n("div",ie,[a(_,{for:"array_number",value:"Number"}),a(V,{id:"array_number",type:"text",class:"mt-1 block w-full",modelValue:s(e).array_number,"onUpdate:modelValue":o[1]||(o[1]=t=>s(e).array_number=t),rows:"1",required:"",onChange:y},null,8,["modelValue"]),a(f,{class:"mt-2",message:s(e).errors.array_number},null,8,["message"])])):p("",!0),l("div",null,[a(_,{for:"option",value:"Blasting Option"}),a(S,{id:"option",class:"mt-1 block w-full",modelValue:s(e).option,"onUpdate:modelValue":o[2]||(o[2]=t=>s(e).option=t),required:""},{default:g(()=>[ne,ue]),_:1},8,["modelValue"]),a(f,{class:"mt-2",message:s(e).errors.name},null,8,["message"])]),s(e).option==="message"?(i(),n("div",de,[a(_,{for:"message",value:"Message"}),a(V,{id:"message",type:"text",class:"mt-1 block w-full",modelValue:s(e).message,"onUpdate:modelValue":o[3]||(o[3]=t=>s(e).message=t),required:""},null,8,["modelValue"]),a(f,{class:"mt-2",message:s(e).errors.message},null,8,["message"])])):p("",!0),["photo","video"].indexOf(s(e).option)>-1?(i(),n("div",me,[l("div",null,[a(_,{for:"message",value:"Message"}),a(V,{id:"message",type:"text",class:"mt-1 block w-full",modelValue:s(e).message,"onUpdate:modelValue":o[4]||(o[4]=t=>s(e).message=t),required:""},null,8,["modelValue"]),a(f,{class:"mt-2",message:s(e).errors.message},null,8,["message"])]),s(e).option==="photo"?(i(),n("div",pe,[a(_,{for:"file_upload",value:"Image"}),a(z,{id:"file_upload",type:"file",class:"mt-1 block w-full",accept:"image/*"}),a(f,{class:"mt-2",file_upload:s(e).errors.file_upload},null,8,["file_upload"])])):p("",!0),s(e).option==="video"?(i(),n("div",ce,[a(_,{for:"file_upload",value:"Video"}),a(P,{id:"file_upload",type:"file",class:"mt-1 block w-full",modelValue:s(e).file_upload,"onUpdate:modelValue":o[5]||(o[5]=t=>s(e).file_upload=t),accept:"video/*"},null,8,["modelValue"]),a(f,{class:"mt-2",file_upload:s(e).errors.file_upload},null,8,["file_upload"])])):p("",!0)])):p("",!0),l("div",_e,[m.value?p("",!0):(i(),n("div",fe,[u.$page.props.auth.role.name==="Admin"||u.$page.props.auth.can["whatsapp.view"]?(i(),E(T,{key:0,disabled:s(e).processing},{default:g(()=>[w(" Send ")]),_:1},8,["disabled"])):p("",!0)])),m.value?(i(),n("div",ge,[a(Z,{"animation-duration":1e3,size:30,color:"#17e083"})])):p("",!0),a(W,{onClick:b},{default:g(()=>[w(" Cancel ")]),_:1})])],40,oe)])])])])]),_:1},8,["auth"])],64))}};export{Ne as default};
